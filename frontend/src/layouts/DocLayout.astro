---
import { ClientRouter } from 'astro:transitions';
import SmartSidebar from '../components/layout/SmartSidebar.astro';
import FloatingMenu from '../components/layout/FloatingMenu.astro';
import MobileBottomMenu from '../components/layout/MobileBottomMenu.astro';
import Icon from '../components/ui/Icon.astro';
import { SITE } from '../site.config';
import { SEO } from "astro-seo";

const { frontmatter, prev, next, headings = [] } = Astro.props;

// Filter headings for TOC (H2 and H3 only)
const tocHeadings = headings.filter((h: any) => h.depth > 1 && h.depth <= 3);

import "@fontsource/inter/400.css";
// import "@fontsource/inter/500.css"; // Omitido para performance
import "@fontsource/inter/600.css"; // Mantendo Semi-bold para UI
import "@fontsource/inter/700.css";
import "@fontsource/jetbrains-mono/400.css";
// import "@fontsource/jetbrains-mono/500.css"; 

// Ensure trailing slash for canonical URL
const pathname = Astro.url.pathname;
const canonicalPath = pathname.endsWith('/') ? pathname : `${pathname}/`;
const canonicalURL = new URL(canonicalPath, SITE.url);

const description = frontmatter.description || SITE.description;
const image = frontmatter.image || SITE.defaultImage;

// Schema.org para Artigo Técnico / Curso
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "TechArticle",
  "headline": frontmatter.title,
  "description": description,
  "image": new URL(image, SITE.url).href,
  "author": {
    "@type": "Person",
    "name": SITE.author,
    "url": SITE.github
  },
  "publisher": {
    "@type": "Organization",
    "name": SITE.name,
    "logo": {
      "@type": "ImageObject",
      "url": new URL("/aprenda-c.ico", SITE.url).href
    }
  },
  "datePublished": frontmatter.pubDate || new Date().toISOString(),
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": canonicalURL.href
  }
};
---

<!doctype html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		
    <SEO
      title={frontmatter.title}
      titleTemplate={`%s | ${SITE.name}`}
      description={description}
      canonical={canonicalURL.href}
      openGraph={{
        basic: {
          title: frontmatter.title,
          type: "article",
          image: new URL(image, SITE.url).href,
          url: canonicalURL.href,
        },
        optional: {
          locale: "pt_BR",
          siteName: SITE.name,
          description: description,
        },
        image: {
            alt: frontmatter.title,
        }
      }}
      twitter={{
        card: "summary_large_image",
        site: SITE.twitter,
        creator: SITE.twitter,
      }}
      extend={{
        link: [{ rel: "icon", href: "/aprenda-c.ico", type: "image/x-icon" }],
        meta: [
          { name: "twitter:image", content: new URL(image, SITE.url).href },
          { name: "theme-color", content: "#09090b" },
          { name: "generator", content: Astro.generator }
        ],
      }}
    />

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />

		<ClientRouter />
	</head>
	<body>
		<FloatingMenu />
		<MobileBottomMenu />
		<div class="app-shell">
			<SmartSidebar />
			
			<main class="content-area">
				<div class="content-grid">
					<div class="prose-column">
<header class="top-bar">
							<div class="breadcrumbs">
								<span class="crumb-root">Módulos</span>
								<span class="crumb-separator">/</span>
								<span class="crumb-current">{frontmatter.title}</span>
							</div>
						</header>

					<article class="prose-content">
						<!-- Content Header with improved typography -->
						<header class="content-header">
							<h1>{frontmatter.title}</h1>
							{frontmatter.description && <p class="lead">{frontmatter.description}</p>}
						</header>

						<slot />
						<!-- Mobile Support CTA (UX: Converta leitores engajados) -->
						<div class="mobile-support-cta">
							<a href="https://github.com/sponsors/Capman002/" target="_blank" class="support-card-mobile">
								<div class="support-icon">
									<Icon name="heart" size={24} />
								</div>
								<div class="support-content">
									<strong>Gostou do conteúdo?</strong>
									<span>Apoie o projeto e garanta novos módulos gratuitos.</span>
								</div>
								<Icon name="arrow-right" size={16} class="arrow-support" />
							</a>
						</div>

						<!-- Navigation Footer -->
						<footer class="doc-footer">
							{prev ? (
								<a href={`/course/${prev.slug}`} class="nav-card prev">
									<div class="nav-label"><Icon name="chevron-down" class="rotate-90" size={12} /> Anterior</div>
									<div class="nav-title">{prev.data.title}</div>
								</a>
							) : <div />}

							{next ? (
								<a href={`/course/${next.slug}`} class="nav-card next">
									<div class="nav-label">Próximo <Icon name="chevron-right" size={12} /></div>
									<div class="nav-title">{next.data.title}</div>
								</a>
							) : <div />}
						</footer>
					</article>

					</div>
					<!-- Right Sidebar (Table of Contents & Metadata) -->
					<aside class="toc-sidebar">
						<div class="toc-wrapper">
							<!-- Author Profile Sidebar -->
							<div class="sidebar-author">
								<div class="sidebar-profile-card">
									<div class="sidebar-avatar">
										<img src="/Emanuel-Nunes.webp" alt={SITE.author} />
									</div>
									<div class="sidebar-author-info">
										<h4 class="sidebar-author-name">{SITE.author}</h4>
										<p class="sidebar-author-bio">Arquiteto de Soluções.</p>
										<div class="sidebar-social text-sm">
											<a href={SITE.github} target="_blank" aria-label="GitHub">
												<Icon name="github" size={14} />
											</a>
											<a href="https://www.linkedin.com/in/emanuel-nunes002/" target="_blank" aria-label="LinkedIn">
												<Icon name="linkedin" size={14} />
											</a>
											<a href="https://links.epixel.com.br" target="_blank" aria-label="Website">
												<Icon name="globe" size={14} />
											</a>
										</div>
									</div>
								</div>
								
								<a href="https://github.com/sponsors/Capman002/" target="_blank" class="sidebar-sponsor-btn">
									<Icon name="heart" size={14} class="heart-icon" />
									<span>Apoiar o Autor</span>
								</a>
							</div>

							<!-- Metadata Section -->
							<div class="doc-metadata">
								{frontmatter.difficulty && (
									<span class={`badge difficulty ${frontmatter.difficulty.toLowerCase()}`}>
										{frontmatter.difficulty}
									</span>
								)}
								{frontmatter.duration && (
									<span class="meta-item">
										<Icon name="clock" size={14} /> {frontmatter.duration}
									</span>
								)}
							</div>

							<h3 class="toc-title">Nesta página</h3>
							<nav class="toc-nav">
								<ul>
									{tocHeadings.map((h: any) => (
										<li class={`toc-item depth-${h.depth}`}>
											<a href={`#${h.slug}`}>{h.text}</a>
										</li>
									))}
								</ul>
							</nav>
						</div>
					</aside>
				</div>
			</main>
		</div>
		<slot name="overlay" />
		
		<script>
			// Premium Copy Code Feature
			function setupCopyButtons() {
				const codeBlocks = Array.from(document.querySelectorAll("pre"));
				
				for (let codeBlock of codeBlocks) {
					// Check if already processed
					const parent = codeBlock.parentElement;
					if (parent?.classList?.contains('code-wrapper')) continue;

					const wrapper = document.createElement("div");
					wrapper.className = "code-wrapper";
					wrapper.style.position = "relative";
					
					const copyButton = document.createElement("button");
					copyButton.className = "copy-code-btn";
					copyButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`;
					copyButton.ariaLabel = "Copiar código";

					if (parent) {
						parent.insertBefore(wrapper, codeBlock);
						wrapper.appendChild(codeBlock);
						wrapper.appendChild(copyButton);
					}

					copyButton.addEventListener("click", async () => {
						const code = codeBlock.querySelector("code");
						const text = code?.innerText || "";

						await navigator.clipboard.writeText(text);

						const originalHtml = copyButton.innerHTML;
						copyButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#27e2a4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>`;
						copyButton.classList.add('copied');
						
						setTimeout(() => {
							copyButton.innerHTML = originalHtml;
							copyButton.classList.remove('copied');
						}, 2000);
					});
				}
			}

			document.addEventListener('astro:page-load', setupCopyButtons);
		</script>
	</body>
</html>

<style is:global>
	/* Copy Code Button */
	.code-wrapper:hover .copy-code-btn {
		opacity: 1;
	}

	.copy-code-btn {
		position: absolute;
		top: 12px;
		right: 12px;
		background: rgba(255, 255, 255, 0.1);
		border: 1px solid rgba(255, 255, 255, 0.1);
		color: #a1a1aa;
		padding: 6px;
		border-radius: 6px;
		cursor: pointer;
		opacity: 0; /* Hidden by default */
		transition: all 0.2s ease;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.copy-code-btn:hover {
		background: rgba(255, 255, 255, 0.2);
		color: white;
	}

	.copy-code-btn.copied {
		border-color: rgba(39, 226, 164, 0.3);
		background: rgba(39, 226, 164, 0.1);
	}

	/* --- PREMIUM DESIGN SYSTEM (MIT/VERCEL STYLE) --- */
	
	:root {
		/* Colors: Monochrome Depth */
		--bg-app: #000000;         /* Pure Black */
		--bg-sidebar: #050505;     /* Almost Black */
		--bg-surface: #0f0f11;     /* Surface for cards */
		
		/* Borders */
		--border: #27272a;         /* Zinc 800 - Sharp */
		--border-subtle: #18181b;  /* Zinc 900 */
		
		/* Text - High Contrast for Readability */
		--text-primary: #ffffff;   /* Pure White */
		--text-secondary: #a1a1aa; /* Zinc 400 */
		--text-tertiary: #52525b;  /* Zinc 600 */
		
		/* Accents */
		--accent-blue: #3291ff;    /* Bright Blue */
		--accent-purple: #7928ca;  /* Vercel Purple */
		--selection: rgba(50, 145, 255, 0.3);
	}

	/* Reset & Base */
	*, *::before, *::after {
		box-sizing: border-box;
	}

	html, body {
		height: 100%;
		margin: 0;
		background-color: var(--bg-app);
		color: var(--text-primary);
		font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		text-rendering: optimizeLegibility;
	}

	::selection { background: var(--selection); color: white; }

	/* Scrollbars - Minimalist */
	::-webkit-scrollbar { width: 5px; height: 5px; }
	::-webkit-scrollbar-track { background: transparent; }
	::-webkit-scrollbar-thumb { background: #333; border-radius: 99px; }
	::-webkit-scrollbar-thumb:hover { background: #555; }

	/* Layout Structure */
	.app-shell {
		display: flex;
		height: 100vh;
		overflow: hidden;
		isolation: isolate; /* Create new stacking context */
		transition: filter 180ms cubic-bezier(0.16, 1, 0.3, 1), opacity 180ms cubic-bezier(0.16, 1, 0.3, 1), transform 180ms cubic-bezier(0.16, 1, 0.3, 1);
	}

	.content-area {
		flex: 1;
		display: flex;
		flex-direction: column;
		overflow-y: scroll;
		overflow-x: hidden; /* Prevent horizontal scroll */
		scroll-behavior: smooth;
		background: var(--bg-app);
		padding-top: 0px; /* Space for fixed navbar */
		position: relative;
	}

  @media (max-width: 768px) {
    .content-area {
      padding-top: 24px; /* Remove huge gap on mobile since FloatingMenu is hidden */
    }
  }

	/* Layout Grid & Responsiveness */
	.content-grid {
		display: grid;
		grid-template-columns: minmax(0, 1fr) 240px; /* Content (flexible with min 0) + TOC */
		gap: 64px;
		width: 100%;
		max-width: 1200px;
		padding: 0 48px 160px 48px;
		margin: 0 auto;
	}

	body.focus-mode .sidebar {
		display: none !important;
	}

	body.focus-mode .toc-sidebar {
		display: none !important;
	}

	body.focus-mode .content-grid {
		grid-template-columns: minmax(0, 1fr);
	}

	body.podcast-mode .floating-menu {
		display: none !important;
	}

	body.podcast-mode .mobile-bottom-menu {
		display: none !important;
	}

	body.podcast-mode .sidebar {
		display: none !important;
	}

	body.podcast-mode .toc-sidebar {
		display: none !important;
	}

	body.podcast-mode .content-grid {
		grid-template-columns: minmax(0, 1fr);
	}

	body.podcast-mode .content-area {
		padding-left: 360px;
		padding-bottom: 140px;
	}

	body.podcast-mode .app-shell {
		filter: saturate(0.9);
		opacity: 0.78;
		transform: scale(0.995);
		transform-origin: center;
	}

	body.podcast-mode .prose-column {
		margin-top: 24px;
	}

	@media (max-width: 960px) {
		body.podcast-mode .content-area {
			padding-left: 0;
			padding-bottom: 170px;
		}
	}
	.prose-column{
		margin-top: 95px;
	}

	.top-bar {
		min-height: 64px;
		display: flex;
		align-items: center;
		margin-bottom: 32px; 
		padding-top: 24px;
		justify-content: flex-start;
		width: 100%;
		border-bottom: 1px solid var(--border-subtle);
		padding-bottom: 12px;
	}

	/* Breadcrumbs - Technical & Clean */
	.breadcrumbs {
		font-family: 'JetBrains Mono', monospace;
		font-size: 13px;
		color: var(--text-tertiary);
		display: flex;
		align-items: center;
		gap: 12px;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	/* Doc Actions & Badges */
	.doc-metadata {
		display: flex;
		flex-direction: column; /* Stack them in sidebar */
		align-items: flex-start;
		gap: 12px;
		margin-bottom: 32px;
		padding-bottom: 24px;
		border-bottom: 1px solid var(--border-subtle);
	}

	.badge {
		font-size: 10px;
		font-weight: 700;
		padding: 4px 8px;
		border-radius: 6px;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		font-family: 'JetBrains Mono', monospace;
		display: inline-block;
	}

	.badge.iniciante { background: rgba(39, 226, 164, 0.1); color: #27e2a4; border: 1px solid rgba(39, 226, 164, 0.2); }
	.badge.intermediário { background: rgba(50, 145, 255, 0.1); color: #3291ff; border: 1px solid rgba(50, 145, 255, 0.2); }
	.badge.avançado { background: rgba(121, 40, 202, 0.1); color: #7928ca; border: 1px solid rgba(121, 40, 202, 0.2); }

	.meta-item {
		display: flex;
		align-items: center;
		gap: 8px;
		font-size: 12px;
		color: var(--text-secondary);
		font-weight: 500;
	}

	/* TOC Sidebar */
	.toc-sidebar {
		position: relative;
		border-left: 1px solid var(--border-subtle);
		padding-left: 24px;
	}

	.toc-wrapper {
		position: sticky;
		top: 0;
		padding-left: 0;
		padding-top: 0;
		padding-bottom: 24px;
	}

	.toc-title {
		font-size: 12px;
		text-transform: uppercase;
		font-weight: 700;
		margin-top: 0;
		margin-bottom: 16px;
		color: var(--text-primary);
		letter-spacing: 0.05em;
	}

  /* Mobile Adjustments */
  @media (max-width: 768px) {
    .content-grid {
      display: block; /* Remove Grid to fix overflow issues */
      padding: 0 16px 120px 16px; 
      width: 100%;
      box-sizing: border-box; /* Ensure padding is included in width */
    }
    
    .toc-sidebar {
      display: none;
    }
    
    /* Hide top floating menu on mobile */
    :global(.floating-menu) {
      display: none !important;
    }

    /* Typography Adjustments */
    h1 { font-size: 2rem !important; line-height: 1.1; }
    h2 { font-size: 1.5rem !important; margin-top: 2.5rem !important; }
    h3 { font-size: 1.25rem !important; margin-top: 1.5rem !important; }
    
    p, li { 
      font-size: 17px !important; /* Slightly smaller for mobile reading */
      line-height: 1.6;
      margin-bottom: 1.25rem;
    }

    /* Blockquote adjustments */
    blockquote {
      margin: 2rem 0;
      padding: 16px 20px;
    }
    
    /* Code block spacing */
    pre {
      margin: 1.5rem 0; /* No negative margins to avoid overflow */
      width: 100%;
      border-radius: 8px; /* Keep consistent border radius */
      border: 1px solid var(--border);
      overflow-x: auto; /* Handle internal scroll */
    }
    
    /* Stats/Metadata compact */
    .doc-metadata {
      margin-bottom: 24px;
      padding-bottom: 16px;
    }
    
    /* Navigation Footer Mobile Stack */
    .doc-footer {
      grid-template-columns: 1fr; /* Stack buttons */
      gap: 16px;
      margin-top: 48px;
    }
    
    .mobile-support-cta {
       display: block !important;
    }
    
    .nav-card.prev, .nav-card.next {
      align-items: center;
      text-align: center;
      width: 100%;
    }
  }

	.toc-nav ul {
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.toc-item {
		margin-bottom: 8px;
	}

	.toc-item a {
		color: var(--text-secondary);
		text-decoration: none;
		font-size: 13px;
		line-height: 1.5;
		transition: color 0.2s;
		display: block;
	}

	.toc-item a:hover {
		color: var(--text-primary);
	}

	.toc-item.depth-3 {
		padding-left: 16px;
	}

	/* Prose Content - The Star of the Show */
	.prose-content {
		width: 100%;
		/* Removed max-width and padding to fit grid */
		margin: 0;
	}

	/* Content Header */
	.content-header {
		margin-bottom: 20px;
		border-bottom: 1px solid var(--border-subtle);
		padding-bottom: 12px;
	}

	.lead {
		font-size: 1rem;
		line-height: 1.4;
		color: #a1a1aa;
		margin-top: 6px;
		margin-bottom: 0;
		max-width: 65ch;
	}

	/* Typography Scale */
	h1 {
		font-size: 3rem;
		font-weight: 800;
		letter-spacing: -0.03em;
		line-height: 1.1;
		color: #fff;
		margin: 0;
	}

	h2 {
		font-size: 1.8rem;
		font-weight: 700;
		letter-spacing: -0.03em;
		margin-top: 3.5rem;
		margin-bottom: 1.25rem;
		color: #fff;
		border-bottom: 1px solid var(--border-subtle);
		padding-bottom: 0.75rem;
	}

	h3 {
		font-size: 1.25rem;
		font-weight: 600;
		margin-top: 2rem;
		margin-bottom: 1rem;
		color: #fff;
	}

	/* Body Text - Crisp & Readable */
	p, li {
		font-size: 19px; 
		line-height: 1.6; 
		color: #d1d5db; 
		margin-bottom: 1.5rem;
		font-weight: 400;
		letter-spacing: -0.01em;
	}

	strong { color: #fff; font-weight: 600; }

	/* Premium "Insight" Block */
	blockquote {
		position: relative;
		margin: 3rem 0;
		padding: 24px 32px;
		background: linear-gradient(180deg, rgba(20, 20, 22, 0.6) 0%, rgba(10, 10, 12, 0.4) 100%);
		border: 1px solid #27272a;
		border-radius: 12px;
		box-shadow: 0 8px 40px rgba(0,0,0,0.4);
	}
	
	/* The "Magical" Glow Line */
	blockquote::before {
		content: '';
		position: absolute;
		left: 0;
		top: 12px;
		bottom: 12px;
		width: 3px;
		background: #3291ff;
		border-radius: 0 4px 4px 0;
		box-shadow: 0 0 12px rgba(50, 145, 255, 0.5);
	}

	blockquote p {
		font-size: 1.05rem;
		color: #e4e4e7;
		margin: 0;
	}


	/* Code Blocks - Studio Quality */
	pre {
		background: #0a0a0a !important;
		border: 1px solid #222;
		border-radius: 8px;
		padding: 20px;
		overflow-x: auto;
		margin: 2rem 0;
		box-shadow: 0 0 0 1px rgba(255,255,255,0.03);
	}

	code {
		font-family: 'JetBrains Mono', monospace;
		font-size: 14px;
	}

	/* Inline Code */
	:not(pre) > code {
		background: rgba(255, 255, 255, 0.08);
		color: #e2e8f0;
		padding: 2px 6px;
		border-radius: 4px;
		font-size: 0.85em;
		border: 1px solid rgba(255, 255, 255, 0.05);
	}
	
	/* Tables */
	table {
		width: 100%;
		border-collapse: collapse;
		margin: 2.5rem 0;
		font-size: 0.95rem;
	}
	
	th {
		text-align: left;
		padding: 16px;
		border-bottom: 1px solid #333;
		color: #fff;
		font-weight: 600;
		font-family: 'JetBrains Mono', monospace;
		font-size: 12px;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}
	
	td {
		padding: 16px;
		border-bottom: 1px solid #1a1a1a;
		color: #a1a1aa;
	}
	tr:hover td { background: #0a0a0a; }

	/* Mobile Support UX */
	.mobile-support-cta {
		display: none; /* Desktop default: Hidden */
		margin: 40px 0 0 0;
	}

	.support-card-mobile {
		display: flex;
		align-items: center;
		gap: 16px;
		padding: 20px;
		background: linear-gradient(135deg, rgba(39, 226, 164, 0.1), rgba(39, 226, 164, 0.05));
		border: 1px solid rgba(39, 226, 164, 0.3);
		border-radius: 12px;
		text-decoration: none;
		color: #fff;
		transition: transform 0.2s;
	}

	.support-card-mobile:active {
		transform: scale(0.98);
		background: rgba(39, 226, 164, 0.15);
	}

	.support-icon {
		display: flex;
		align-items: center;
		justify-content: center;
		color: #27e2a4;
		animation: pulse-heart 2s infinite ease-in-out;
	}

	@keyframes pulse-heart {
		0% { transform: scale(1); }
		50% { transform: scale(1.1); }
		100% { transform: scale(1); }
	}

	.support-content {
		flex: 1;
		display: flex;
		flex-direction: column;
		gap: 4px;
	}

	.support-content strong {
		font-size: 15px;
		color: #27e2a4;
	}

	.support-content span {
		font-size: 13px;
		color: #a1a1aa;
		line-height: 1.4;
	}

	.arrow-support {
		color: #27e2a4;
		opacity: 0.6;
	}

	/* Animations */
	@keyframes fadeIn {
		from { opacity: 0; transform: translateY(10px); }
		to { opacity: 1; transform: translateY(0); }
	}
	
	.prose-content { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1); }

	/* Navigation Footer Styles - Premium Redesign */
	.doc-footer {
		margin-top: 80px;
		padding-top: 40px;
		border-top: 1px solid var(--border-subtle);
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 24px;
	}

	.nav-card {
		display: flex;
		flex-direction: column;
		padding: 24px 32px;
		border: 1px solid var(--border-subtle);
		border-radius: 12px;
		text-decoration: none;
		background: linear-gradient(180deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
		transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
		position: relative;
		overflow: hidden;
	}

	.nav-card:hover {
		border-color: rgba(50, 145, 255, 0.4);
		background: linear-gradient(180deg, rgba(50, 145, 255, 0.06) 0%, rgba(50, 145, 255, 0.02) 100%);
		transform: translateY(-2px);
		box-shadow: 0 12px 40px -12px rgba(50, 145, 255, 0.2);
	}

	.nav-card.prev { align-items: flex-start; text-align: left; }
	.nav-card.next { align-items: flex-end; text-align: right; }

	.nav-label {
		display: flex;
		align-items: center;
		gap: 8px;
		font-size: 11px;
		font-weight: 700;
		letter-spacing: 0.12em;
		text-transform: uppercase;
		color: var(--text-tertiary);
		margin-bottom: 12px;
		transition: all 0.3s ease;
	}

	.nav-card:hover .nav-label {
		color: var(--accent-blue);
	}

	/* Icon Animations */
	.nav-card.prev:hover .nav-label { transform: translateX(-4px); }
	.nav-card.next:hover .nav-label { transform: translateX(4px); }

	.rotate-90 { transform: rotate(90deg); }
    .nav-card.prev .nav-label .rotate-90 { transform: rotate(90deg); }

	.nav-title {
		font-size: 1.1rem;
		font-weight: 600;
		color: var(--text-primary);
		line-height: 1.4;
        transition: color 0.3s;
	}
	
	.nav-card:hover .nav-title {
		color: #fff;
		text-shadow: 0 0 20px rgba(50, 145, 255, 0.4);
	}

	/* Sidebar Author Profile - Redesigned */
	.sidebar-author {
		margin-bottom: 32px;
		padding-bottom: 24px;
		border-bottom: 1px solid var(--border-subtle);
	}

	.sidebar-profile-card {
		display: flex;
		gap: 12px;
		align-items: flex-start;
		padding-top: 30px;
	}

	.sidebar-avatar img {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		border: 1px solid var(--border);
		object-fit: cover;
	}

	.sidebar-author-info {
		display: flex;
		flex-direction: column;
	}

	.sidebar-author-name {
		font-size: 13px;
		font-weight: 600;
		color: #fff;
		margin: 0 0 2px 0;
	}

	.sidebar-author-bio {
		font-size: 11px;
		color: var(--text-secondary);
		line-height: 1.4;
		margin: 0 0 8px 0;
	}

	.sidebar-social {
		display: flex;
		gap: 10px;
	}

	.sidebar-social a {
		color: var(--text-tertiary);
		transition: color 0.2s;
	}

	.sidebar-social a:hover {
		color: var(--accent-blue);
		transform: translateY(-1px);
	}
	.sidebar-social a:hover {
		color: var(--accent-blue);
	}
	.sidebar-sponsor-btn {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 8px;
		margin-top: 16px;
		padding: 8px 12px;
		background: linear-gradient(135deg, rgba(0, 200, 83, 0.1), rgba(0, 200, 83, 0.05));
		border: 1px solid rgba(0, 200, 83, 0.2);
		border-radius: 6px;
		color: #00C853;
		font-size: 12px;
		font-weight: 600;
		text-decoration: none;
		transition: all 0.2s ease;
		text-transform: uppercase;
		letter-spacing: 0.05em;
	}

	.sidebar-sponsor-btn:hover {
		background: rgba(0, 200, 83, 0.15);
		border-color: rgba(0, 200, 83, 0.4);
		transform: translateY(-1px);
		box-shadow: 0 4px 12px rgba(0, 200, 83, 0.1);
		color: #00e676;
	}

	.sidebar-sponsor-btn .heart-icon {
		transition: transform 0.2s ease;
	}

	.sidebar-sponsor-btn:hover .heart-icon {
		transform: scale(1.1);
		fill: rgba(0, 200, 83, 0.4);
	}
</style>
